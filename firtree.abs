/* ------------------------------------------------------------------------ */
/*                                                                          */
/* [firtree.abs]               Abstract Grammar                             */
/*                                                                          */
/* ------------------------------------------------------------------------ */

LANGUAGE firtree

TOKENS

  Identifier, IntConst, FloatConst, BoolConst

TYPES

  firtree                                 = Start_TranslationUnit(ExternalDeclaration*)

  ExternalDeclaration                     = definefuntion(FunctionDefinition);
                                            declarefunction(FunctionPrototype)

  FunctionPrototype                       = functionprototype(FunctionQualifier, FullySpecifiedType, Identifier, ParameterDeclaration*)

  FunctionQualifier                       = kernel;
                                            function

  FullySpecifiedType                      = qualifiedtype(TypeQualifier, TypeSpecifier);
                                            unqualifiedtype(TypeSpecifier)

  TypeSpecifier                           = vec4;
                                            float;
                                            vec2;
                                            color;
                                            vec3;
                                            int;
                                            sampler;
                                            bool;
                                            void

  ParameterDeclaration                    = parameterdeclaration(OptionalTypeQualifier, OptionalParameterQualifier, TypeSpecifier, OptionalParameterIdentifier)

  TypeQualifier                           = const

  OptionalTypeQualifier                   = const;
                                            none

  OptionalParameterQualifier              = in;
                                            out;
                                            inout;
                                            none

  OptionalParameterIdentifier             = unnamedparameter;
                                            parametername(Identifier)

  FunctionDefinition                      = functiondefinition(FunctionPrototype, Expression*)

  SingleDeclaration                       = variableinitializer(Identifier, Expression)

  Expression                              = greater(Expression, Expression);
                                            equal(Expression, Expression);
                                            add(Expression, Expression);
                                            int(IntConst);
                                            variablenamed(Identifier);
                                            inc(Expression);
                                            bool(BoolConst);
                                            dec(Expression);
                                            addassign(Expression, Expression);
                                            mulassign(Expression, Expression);
                                            sub(Expression, Expression);
                                            return(Expression);
                                            nop;
                                            compound(Expression*);
                                            fieldselect(Expression, Identifier);
                                            initdeclaratorlist(FullySpecifiedType, SingleDeclaration, SingleDeclaration*);
                                            greaterequal(Expression, Expression);
                                            postdec(Expression);
                                            logicalor(Expression, Expression);
                                            divassign(Expression, Expression);
                                            while(Expression, Expression);
                                            newsymbol(FullySpecifiedType, Identifier, Expression);
                                            logicalxor(Expression, Expression);
                                            ternary(Expression, Expression, Expression);
                                            for(Expression, Expression, Expression, Expression);
                                            subassign(Expression, Expression);
                                            float(FloatConst);
                                            selection(Expression, Expression, Expression);
                                            functioncall(FunctionSpecifier, Expression*);
                                            negate(Expression);
                                            notequal(Expression, Expression);
                                            expression(Expression, Expression*);
                                            logicaland(Expression, Expression);
                                            do(Expression, Expression);
                                            less(Expression, Expression);
                                            postinc(Expression);
                                            lessequal(Expression, Expression);
                                            assign(Expression, Expression)

  FunctionSpecifier                       = functionnamed(Identifier);
                                            constructorfor(TypeSpecifier)

