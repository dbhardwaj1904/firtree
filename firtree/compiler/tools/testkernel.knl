
kernel vec4 anotherKernel(static sampler src, vec2 offset)
{
  return sample(src, samplerTransform(src, destCoord() + offset));
}

kernel vec4 desaturateKernel(static sampler src)
{
  static vec4 rgb2int = vec4(0.299, 0.587, 0.114, 0.0);
  __color a = sample(src, samplerCoord(src));
  float intensity = dot(rgb2int, unpremultiply(a));
  return premultiply(vec4(intensity * vec3(1,1,1), a.a));
}

// vim:filetype=c:cindent:sw=2:ts=2:et

