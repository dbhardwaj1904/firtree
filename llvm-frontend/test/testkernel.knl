/* Builtins defined by library. */
__builtin__ float max(float, float);
__builtin__ vec2 max(vec2, vec2);
__builtin__ vec3 max(vec3, vec3);
__builtin__ vec4 max(vec4, vec4);
__builtin__ vec2 destCoord();
__builtin__ vec2 samplerCoord(sampler);
__builtin__ vec2 samplerTransform(sampler,vec2);
__builtin__ vec2 samplerOrigin(sampler);
__builtin__ vec2 samplerSize(sampler);
__builtin__ vec4 samplerExtend(sampler);
__builtin__ vec4 sample(sampler,vec2);
__builtin__ float sin(float);
__builtin__ vec2 sin(vec2);
__builtin__ vec3 sin(vec3);
__builtin__ vec4 sin(vec4);
__builtin__ float cos(float);
__builtin__ vec2 cos(vec2);
__builtin__ vec3 cos(vec3);
__builtin__ vec4 cos(vec4);
__builtin__ vec2 sincos(float);
__builtin__ vec2 cossin(float);
__builtin__ float dot(vec2,vec2);
__builtin__ float dot(vec3,vec3);
__builtin__ float dot(vec4,vec4);

/* Our actual kernel. */
kernel vec4 deaturateKernel(sampler src)
{
  vec4 a = sample(src, samplerCoord(src));
  vec4 rgb2int = vec4(0.299, 0.587, 0.114, 0.0);
  float intensity = dot(rgb2int, a);
  return vec4(intensity * vec3(1,1,1), a.a);
}

// vim:filetype=c:cindent:sw=2:ts=2:et

